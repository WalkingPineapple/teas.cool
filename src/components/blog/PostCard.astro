---
import { formatDate, getReadingTime } from '../../utils/theme.js';
import Card from '../ui/Card.astro';

interface Props {
  title: string;
  href: string;
  description: string;
  date: string;
  tags?: string[];
  content?: string;
}

const { title, href, description, date, tags = [], content } = Astro.props;
---

<Card class="post-card">
  <article class="post-content">
    <header class="post-header">
      <time class="post-date" datetime={date}>
        {formatDate(date)}
      </time>
      {content && (
        <span class="reading-time">
          {getReadingTime(content)}
        </span>
      )}
    </header>

    <h3 class="post-title">
      <a href={href} class="post-link">
        {title}
      </a>
    </h3>

    <p class="post-description">
      {description}
    </p>

    {tags.length > 0 && (
      <footer class="post-footer">
        <div class="post-tags">
          {tags.map(tag => (
            <a href={`/tags/${tag}`} class="tag">
              #{tag}
            </a>
          ))}
        </div>
      </footer>
    )}
  </article>
</Card>

<style>
  .post-card {
    height: 100%;
    transition: all var(--transition-normal);
  }

  .post-content {
    height: 100%;
    display: flex;
    flex-direction: column;
  }

  .post-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: var(--space-3);
    padding-bottom: var(--space-2);
    border-bottom: 1px solid var(--color-border);
  }

  .post-date {
    font-size: var(--text-sm);
    color: var(--color-text-muted);
    font-family: var(--font-family-mono);
  }

  .reading-time {
    font-size: var(--text-xs);
    color: var(--color-text-muted);
    font-family: var(--font-family-sans);
  }

  .post-title {
    margin: 0 0 var(--space-3) 0;
    font-size: var(--text-xl);
    line-height: 1.4;
  }

  .post-link {
    color: var(--color-text-primary);
    text-decoration: none;
    transition: color var(--transition-fast);
  }

  .post-link:hover {
    color: var(--color-primary);
  }

  .post-description {
    flex: 1;
    font-size: var(--text-base);
    line-height: 1.6;
    color: var(--color-text-secondary);
    margin-bottom: var(--space-4);
  }

  .post-footer {
    margin-top: auto;
  }

  .post-tags {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
  }

  .tag {
    font-size: var(--text-xs);
    color: var(--color-accent);
    text-decoration: none;
    padding: var(--space-1) var(--space-2);
    background-color: color-mix(in srgb, var(--color-accent) 10%, transparent);
    border-radius: calc(var(--border-radius) * 0.5);
    transition: all var(--transition-fast);
    font-family: var(--font-family-mono);
  }

  .tag:hover {
    background-color: color-mix(in srgb, var(--color-accent) 20%, transparent);
    transform: translateY(-1px);
  }
</style>